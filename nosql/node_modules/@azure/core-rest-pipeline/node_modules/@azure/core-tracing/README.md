---
ms.openlocfilehash: b39271c36702513d70dc9f28e4cedb95c04a6525
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050844"
---
# <a name="azure-core-tracing-library-for-javascript"></a>適用於 JavaScript 的 Azure Core 追蹤程式庫

此核心追蹤程式庫具有低階介面和協助程式方法，可追蹤在瀏覽器和 Node.js 中運作的 Azure SDK JavaScript 程式庫。

## <a name="getting-started"></a>開始使用

### <a name="installation"></a>安裝

使用 npm 安裝此程式庫，如下所示

```
npm install @azure/core-tracing
```

## <a name="key-concepts"></a>重要概念

`@azure/core-tracing` 套件可利用 [OpenTelemetry](https://opentelemetry.io/)`Tracer` 追蹤 Azure SDK 套件。

根據預設，所有程式庫都會記錄無動作的 `NoOpTracer`。
若要變更，您必須使用 `setTracer` 來設定新的預設 `Tracer`。

## <a name="examples"></a>範例

### <a name="example-1---setting-an-opentelemetry-tracer"></a>範例 1 - 設定 OpenTelemetry 追蹤器

```js
const opentelemetry = require("@opentelemetry/api");
const { BasicTracer, SimpleSpanProcessor } = require("@opentelemetry/tracing");
const { ZipkinExporter } = require("@opentelemetry/exporter-zipkin");
const { setTracer } = require("@azure/core-tracing");

const exporter = new ZipkinExporter({
  serviceName: "azure-tracing-sample"
});
const tracer = new BasicTracer();
tracer.addSpanProcessor(new SimpleSpanProcessor(exporter));

setTracer(tracer);

const rootSpan = tracer.startSpan("root");
const context = opentelemetry.setSpan(opentelemetry.context.active(), rootSpan);

// Call some client library methods and pass rootSpan via tracingOptions.

rootSpan.end();
exporter.shutdown();
```

### <a name="example-2---passing-current-context-to-library-operations"></a>範例 2 - 將目前的內容傳遞至程式庫作業

```js
// Given a BlobClient from @azure/storage-blob
const result = await blobClient.download(undefined, undefined, {
  tracingOptions: {
    tracingContext: context
  }
});
```

## <a name="next-steps"></a>後續步驟

您可執行 `rushx test` 以在本機組建和執行測試。 請在 `test` 資料夾中查看公用類別的進階使用方式和行為。

## <a name="troubleshooting"></a>疑難排解

如果您在使用此程式庫時遇到問題，可隨時[提出問題](https://github.com/Azure/azure-sdk-for-js/issues/new)。

## <a name="contributing"></a>參與

如果您希望向此程式庫投稿，請參閱[投稿指南](https://github.com/Azure/azure-sdk-for-js/blob/main/CONTRIBUTING.md)，深入瞭解如何組建與測試程式碼。

![曝光數](https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-js%2Fsdk%2Fcore%2Fcore-tracing%2FREADME.png)
