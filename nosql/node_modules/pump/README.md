---
ms.openlocfilehash: a99dd16ee6283131f11f543fc7caf0badb805d7a
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050760"
---
# <a name="pump"></a>幫浦

幫浦為一個小型節點模組，能使用管線連接資料流，並在其中一個節點關閉時終結所有節點模組。

```
npm install pump
```

[![組建狀態](http://img.shields.io/travis/mafintosh/pump.svg?style=flat)](http://travis-ci.org/mafintosh/pump)

## <a name="what-problem-does-it-solve"></a>它可以解決哪些問題？

如果 dest 發出關閉或錯誤，則使用標準 `source.pipe(dest)` 來源時將 _不會_ 遭到終結。
您也無法提供回撥來告知管道何時完成。

幫浦會為您執行這兩件事

## <a name="usage"></a>使用方式

只需將您想使用管線一起傳輸的資料流傳送至幫浦，並新增選用回撥即可

``` js
var pump = require('pump')
var fs = require('fs')

var source = fs.createReadStream('/dev/random')
var dest = fs.createWriteStream('/dev/null')

pump(source, dest, function(err) {
  console.log('pipe finished', err)
})

setTimeout(function() {
  dest.destroy() // when dest is closed pump will destroy source
}, 1000)
```

您也可以運用幫浦，以使用管線將兩個以上的資料流一起傳送

``` js
var transform = someTransformStream()

pump(source, transform, anotherTransform, dest, function(err) {
  console.log('pipe finished', err)
})
```

如果 `source`、`transform`、`anotherTransform` 或 `dest` 關閉，則所有項目都會終結。

與 `stream.pipe()` 的情況相似，`pump()` 會傳回傳入的最後一個資料流，因此您可以執行下列動作：

```
return pump(s1, s2) // returns s2
```

如果您想將 s1 和 s2 *兩者* 合併為單一串流的資料流傳回，請改用 [pumpify](https://github.com/mafintosh/pumpify)。

## <a name="license"></a>授權

MIT

## <a name="related"></a>相關參考

`pump` 是 [mississippi 資料流公用程式集合](https://github.com/maxogden/mississippi)的一部分，其中包含類似於此模組但更實用的資料流模組。
