---
ms.openlocfilehash: c6dc9b216d8255c51f2dc575a7c59dce25deff9e
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050500"
---
<!--
  -- This file is auto-generated from README_js.md. Changes should be made there.
  -->

# <a name="uuid-cihttpsgithubcomuuidjsuuidactionsqueryworkflow3aci-browserhttpsgithubcomuuidjsuuidactionsqueryworkflow3abrowser"></a>uuid [![CI](https://github.com/uuidjs/uuid/workflows/CI/badge.svg)](https://github.com/uuidjs/uuid/actions?query=workflow%3ACI) [![瀏覽器](https://github.com/uuidjs/uuid/workflows/Browser/badge.svg)](https://github.com/uuidjs/uuid/actions?query=workflow%3ABrowser)

為建立 [RFC4122](http://www.ietf.org/rfc/rfc4122.txt) UUID

- **完成** - 支援 RFC4122 版本 1、3、4 和 5 UUID
- **跨平台** - 支援...
  - CommonJS、[ECMAScript 模組](#ecmascript-modules) 和 [CDN 組建](#cdn-builds)
  - 節點 8、10、12、14
  - Chrome、Safari、Firefox、Edge、IE 11 瀏覽器
  - Webpack 和 rollup.js 模組搭配程式
  - [React Native / Expo](#react-native--expo)
- **安全** - 密碼編譯較強的隨機值
- **小型** - 零相依性、使用量小、搭配「樹狀結構震動」封裝工具作用良好
- **CLI** - 包含 [`uuid` 命令列](#command-line) 公用程式

**升級來源 `uuid@3.x`？** 您的程式碼可能沒問題，但請參閱 [升級來源 `uuid@3.x`](#upgrading-from-uuid3x) 以取得詳細資料。

## <a name="quickstart"></a>快速入門

若要建立隨機 UUID...

**1.安裝**

```shell
npm install uuid
```

**2.建立 UUID** (ES6 模組語法)

```javascript
import { v4 as uuidv4 } from 'uuid';
uuidv4(); // ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'
```

... or using CommonJS syntax:

```javascript
const { v4: uuidv4 } = require('uuid');
uuidv4(); // ⇨ '1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed'
```

針對時間戳記 UUID、命名空間 UUID，以及其他讀取選項...

## <a name="api-summary"></a>API 摘要

|  |  |  |
| --- | --- | --- |
| [`uuid.NIL`](#uuidnil) | nil UUID 字串 (全部為零) | `uuid@8.3` 中的新功能 |
| [`uuid.parse()`](#uuidparsestr) | 將 UUID 字串轉換為位元組陣列 | `uuid@8.3` 中的新功能 |
| [`uuid.stringify()`](#uuidstringifyarr-offset) | 將位元組陣列轉換為 UUID 字串 | `uuid@8.3` 中的新功能 |
| [`uuid.v1()`](#uuidv1options-buffer-offset) | 建立版本 1 (時間戳記) UUID |  |
| [`uuid.v3()`](#uuidv3name-namespace-buffer-offset) | 建立版本 3 (命名空間和 MD5) UUID |  |
| [`uuid.v4()`](#uuidv4options-buffer-offset) | 建立版本 4 (隨機) UUID |  |
| [`uuid.v5()`](#uuidv5name-namespace-buffer-offset) | 建立版本 5 (命名空間和 SHA-1) UUID |  |
| [`uuid.validate()`](#uuidvalidatestr) | 測試字串，查看是否為有效的 UUID | `uuid@8.3` 中的新功能 |
| [`uuid.version()`](#uuidversionstr) | 偵測 UUID 的 RFC 版本 | `uuid@8.3` 中的新功能 |

## <a name="api"></a>API

### <a name="uuidnil"></a>uuid.NIL

nil UUID 字串 (全部為零)。

範例：

```javascript
import { NIL as NIL_UUID } from 'uuid';

NIL_UUID; // ⇨ '00000000-0000-0000-0000-000000000000'
```

### <a name="uuidparsestr"></a>uuid.parse(str)

將 UUID 字串轉換為位元組陣列

|           |                                          |
| --------- | ---------------------------------------- |
| `str`     | 無效的 UUID `String`                    |
| _傳回_ | `Uint8Array[16]`                         |
| _throws_  | `TypeError`如果`str` UUID 無效 |

注意：將`parse()` 和 `stringify()` 所使用的位元組陣列中的值進行排序，並遵循 UUID 字串中十六進位組左 &Rarr; 右的順序。 如下列範例所示。

範例：

```javascript
import { parse as uuidParse } from 'uuid';

// Parse a UUID
const bytes = uuidParse('6ec0bd7f-11c0-43da-975e-2a8ad9ebae0b');

// Convert to hex strings to show byte order (for documentation purposes)
[...bytes].map((v) => v.toString(16).padStart(2, '0')); // ⇨ 
  // [
  //   '6e', 'c0', 'bd', '7f',
  //   '11', 'c0', '43', 'da',
  //   '97', '5e', '2a', '8a',
  //   'd9', 'eb', 'ae', '0b'
  // ]
```

### <a name="uuidstringifyarr-offset"></a>uuid.stringify(arr[, offset])

將位元組陣列轉換為 UUID 字串

|                |                                                                              |
| -------------- | ---------------------------------------------------------------------------- |
| `arr`          | 0 到 255 之間 `Array` 的 16 個值集合 (從 `offset` 開始)。 |
| [`offset` = 0] | `Number` 陣列中的起始索引                                         |
| _傳回_      | `String`                                                                     |
| _擲回_       | `TypeError` 如果無法產生有效的 UUID 字串                       |

注意：將`parse()` 和 `stringify()` 所使用的位元組陣列中的值進行排序，並遵循 UUID 字串中十六進位組左 &Rarr; 右的順序。 如下列範例所示。

範例：

```javascript
import { stringify as uuidStringify } from 'uuid';

const uuidBytes = [
  0x6e,
  0xc0,
  0xbd,
  0x7f,
  0x11,
  0xc0,
  0x43,
  0xda,
  0x97,
  0x5e,
  0x2a,
  0x8a,
  0xd9,
  0xeb,
  0xae,
  0x0b,
];

uuidStringify(uuidBytes); // ⇨ '6ec0bd7f-11c0-43da-975e-2a8ad9ebae0b'
```

### <a name="uuidv1options-buffer-offset"></a>uuid.v1([options[, buffer[, offset]]])

建立 RFC 版本 1 (時間戳記) UUID

|  |  |
| --- | --- |
| [`options`] | `Object` 有下列一或多個屬性： |
| [`options.node` ] | RFC [node] 欄位，作為位元組值的 `Array[6]` (每 4.1.6) |
| [`options.clockseq`] | RFC [時鐘序列] `Number` 介於 0 - 0x3fff |
| [`options.msecs`] | RFC [時間戳記] 欄位 (`Number` 毫秒，UNIX Epoch) |
| [`options.nsecs`] | RFC [時間戳記] 欄位 (要新增至 `msecs` 的 `Number` 奈秒，應為 0-10,000) |
| [`options.random`] | 16 個隨機位元組 (0-255) 的 `Array` |
| [`options.rng`] | `options.random` 的替代方式，`Function` 傳回 `Array` 的 16 個隨機位元組 (0-255) |
| [`buffer`] | `Array \| Buffer` 如有指定，則會以位元組格式寫入 UUID，從 `offset` 開始 |
| [`offset` = 0] | `Number` 開始以 `buffer` 寫入 UUID 位元組的索引 |
| _傳回_ | UUID `String` 如果未指定 `buffer`，則會傳回 `buffer` |
| _擲回_ | `Error` 如果要求超過每秒 10M UUID |

注意：預設 [節點識別碼](https://tools.ietf.org/html/rfc4122#section-4.1.6) (UUID 中的最後 12 個數字) 會在流程啟動時隨機產生一次，然後在流程期間維持不變。

請注意：`options.random` 和 `options.rng` 只有在第一次呼叫 `v1()` 時才有意義，其中可能會傳遞它們來將內部 `node` 和 `clockseq` 欄位初始化。

範例：

```javascript
import { v1 as uuidv1 } from 'uuid';

uuidv1(); // ⇨ '2c5ea4c0-4067-11e9-8bad-9b1deb4d3b7d'
```

使用 `options` 的範例：

```javascript
import { v1 as uuidv1 } from 'uuid';

const v1options = {
  node: [0x01, 0x23, 0x45, 0x67, 0x89, 0xab],
  clockseq: 0x1234,
  msecs: new Date('2011-11-01').getTime(),
  nsecs: 5678,
};
uuidv1(v1options); // ⇨ '710b962e-041c-11e1-9234-0123456789ab'
```

### <a name="uuidv3name-namespace-buffer-offset"></a>uuid.v3(name, namespace[, buffer[, offset]])

建立 RFC 版本 3 (命名空間和 MD5) UUID

API 與 `v5()` 相同，但會改用「v3」。

&#x26a0;&#xfe0f; Note:根據 RFC：「_若回溯相容性沒有產生問題，則建議使用 SHA-1 [版本 5]_ 。」

### <a name="uuidv4options-buffer-offset"></a>uuid.v4([options[, buffer[, offset]]])

建立 RFC 版本 4 (隨機) UUID

|  |  |
| --- | --- |
| [`options`] | `Object` 有下列一或多個屬性： |
| [`options.random`] | 16 個隨機位元組 (0-255) 的 `Array` |
| [`options.rng`] | `options.random` 的替代方式，`Function` 傳回 `Array` 的 16 個隨機位元組 (0-255) |
| [`buffer`] | `Array \| Buffer` 如有指定，則會以位元組格式寫入 UUID，從 `offset` 開始 |
| [`offset` = 0] | `Number` 開始以 `buffer` 寫入 UUID 位元組的索引 |
| _傳回_ | UUID `String` 如果未指定 `buffer`，則會傳回 `buffer` |

範例：

```javascript
import { v4 as uuidv4 } from 'uuid';

uuidv4(); // ⇨ '1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed'
```

使用預先定義 `random` 值的範例：

```javascript
import { v4 as uuidv4 } from 'uuid';

const v4options = {
  random: [
    0x10,
    0x91,
    0x56,
    0xbe,
    0xc4,
    0xfb,
    0xc1,
    0xea,
    0x71,
    0xb4,
    0xef,
    0xe1,
    0x67,
    0x1c,
    0x58,
    0x36,
  ],
};
uuidv4(v4options); // ⇨ '109156be-c4fb-41ea-b1b4-efe1671c5836'
```

### <a name="uuidv5name-namespace-buffer-offset"></a>uuid.v5(name, namespace[, buffer[, offset]])

建立 RFC 版本 5 (命名空間和 SHA-1) UUID

|  |  |
| --- | --- |
| `name` | `String \| Array` |
| `namespace` | `String \| Array[16]` 命名空間 UUID |
| [`buffer`] | `Array \| Buffer` 如有指定，則會以位元組格式寫入 UUID，從 `offset` 開始 |
| [`offset` = 0] | `Number` 開始以 `buffer` 寫入 UUID 位元組的索引 |
| _傳回_ | UUID `String` 如果未指定 `buffer`，則會傳回 `buffer` |

注意：RFC `DNS` 和 `URL` 命名空間以`v5.DNS` 和 `v5.URL`提供。

自訂命名空間的範例：

```javascript
import { v5 as uuidv5 } from 'uuid';

// Define a custom namespace.  Readers, create your own using something like
// https://www.uuidgenerator.net/
const MY_NAMESPACE = '1b671a64-40d5-491e-99b0-da01ff1f3341';

uuidv5('Hello, World!', MY_NAMESPACE); // ⇨ '630eb68f-e0fa-5ecc-887a-7c7a62614681'
```

RFC `URL` 命名空間的範例：

```javascript
import { v5 as uuidv5 } from 'uuid';

uuidv5('https://www.w3.org/', uuidv5.URL); // ⇨ 'c106a26a-21bb-5538-8bf2-57095d1976c1'
```

### <a name="uuidvalidatestr"></a>uuid.validate(str)

測試字串，查看是否為有效的 UUID

|           |                                                     |
| --------- | --------------------------------------------------- |
| `str`     | 要驗證的 `String`                                |
| _傳回_ | 若字串是有效的 UUID 則為 `true`，否則為 `false` |

範例：

```javascript
import { validate as uuidValidate } from 'uuid';

uuidValidate('not a UUID'); // ⇨ false
uuidValidate('6ec0bd7f-11c0-43da-975e-2a8ad9ebae0b'); // ⇨ true
```

同時使用 `validate` 和 `version`，即可進行每個版本的驗證，例如只驗證 v4 的 UUID。

```javascript
import { version as uuidVersion } from 'uuid';
import { validate as uuidValidate } from 'uuid';

function uuidValidateV4(uuid) {
  return uuidValidate(uuid) && uuidVersion(uuid) === 4;
}

const v1Uuid = 'd9428888-122b-11e1-b85c-61cd3cbb3210';
const v4Uuid = '109156be-c4fb-41ea-b1b4-efe1671c5836';

uuidValidateV4(v4Uuid); // ⇨ true
uuidValidateV4(v1Uuid); // ⇨ false
```

### <a name="uuidversionstr"></a>uuid.version(str)

偵測 UUID 的 RFC 版本

|           |                                          |
| --------- | ---------------------------------------- |
| `str`     | 有效的 UUID `String`                    |
| _傳回_ | `Number` UUID 的 RFC 版本     |
| _擲回_  | `TypeError`如果`str` UUID 無效 |

範例：

```javascript
import { version as uuidVersion } from 'uuid';

uuidVersion('45637ec4-c85f-11ea-87d0-0242ac130003'); // ⇨ 1
uuidVersion('6ec0bd7f-11c0-43da-975e-2a8ad9ebae0b'); // ⇨ 4
```

## <a name="command-line"></a>命令列

UUID 可以從使用 `uuid` 的命令列產生。

```shell
$ uuid
ddeb27fb-d9a0-4624-be4d-4615062daed4
```

預設值是用於產生版本 4 的 UUID，但支援其他版本。 如需詳細資訊，請輸入 `uuid --help`：

```shell
$ uuid --help

Usage:
  uuid
  uuid v1
  uuid v3 <name> <namespace uuid>
  uuid v4
  uuid v5 <name> <namespace uuid>
  uuid --help

Note: <namespace uuid> may be "URL" or "DNS" to use the corresponding UUIDs
defined by RFC4122
```

## <a name="ecmascript-modules"></a>ECMAScript 模組

此程式庫隨附 [ECMAScript 模組](https://www.ecma-international.org/ecma-262/6.0/#sec-modules)(ESM) 支援 Node.js 版本 ([範例](./examples/node-esmodules/))，以及搭配程式如 [rollup.js](https://rollupjs.org/guide/en/#tree-shaking) ([範例](./examples/browser-rollup/)) 和 [webpack](https://webpack.js.org/guides/tree-shaking/) ([範例](./examples/browser-webpack/)) (以 Node.js 和瀏覽器環境為目標)。

```javascript
import { v4 as uuidv4 } from 'uuid';
uuidv4(); // ⇨ '1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed'
```

若要執行範例，您必須先在模組根目錄中建立此程式庫的 dist 組建：

```shell
npm run build
```

## <a name="cdn-builds"></a>CDN 組建

### <a name="ecmascript-modules"></a>ECMAScript 模組

若要直接將此模組載入 [支援載入 ECMAScript 模組](https://caniuse.com/#feat=es6-module)的現代化瀏覽器，您可以使用 [jspm](https://jspm.org/)：

```html
<script type="module">
  import { v4 as uuidv4 } from 'https://jspm.dev/uuid';
  console.log(uuidv4()); // ⇨ '1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed'
</script>
```

### <a name="umd"></a>UMD

若要直接將此模組載入舊版瀏覽器，您可以使用 [UMD (通用模組定義) ](https://github.com/umdjs/umd)從下列任一 CDN 建置：

**使用 [UNPKG](https://unpkg.com/uuid@latest/dist/umd/)** ：

```html
<script src="https://unpkg.com/uuid@latest/dist/umd/uuidv4.min.js"></script>
```

**使用 [jsDelivr](https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/)** ：

```html
<script src="https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv4.min.js"></script>
```

**使用 [cdnjs](https://cdnjs.com/libraries/uuid)** ：

```html
<script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.1.0/uuidv4.min.js"></script>
```

這些 CDN 全都提供相同的 [`uuidv4()`](#uuidv4options-buffer-offset) 方法：

```html
<script>
  uuidv4(); // ⇨ '55af1e37-0734-46d8-b070-a1e42e4fc392'
</script>
```

其他演算法 ([`uuidv1()`](#uuidv1options-buffer-offset),[`uuidv3()`](#uuidv3name-namespace-buffer-offset) 和 [`uuidv5()`](#uuidv5name-namespace-buffer-offset))的方法可分別從 `uuidv1.min.js`、`uuidv3.min.js` 和 `uuidv5.min.js` 檔案取得。

## <a name="getrandomvalues-not-supported"></a>「不支援 getRandomValues ()」

此錯誤發生在不支援標準 [`crypto.getRandomValues()`](https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues) API 的環境中。 您可以藉由新增適當的 polyfill 來解決此問題：

### <a name="react-native--expo"></a>React Native / Expo

1. 安裝[`react-native-get-random-values`](https://github.com/LinusU/react-native-get-random-values#readme)
1. 在 _之前_`uuid`匯入它。 因為 `uuid` 可能也會顯示為其他匯入的可轉移相依性，所以一開始只匯入 `react-native-get-random-values` 作為進入點是最安全的做法：

```javascript
import 'react-native-get-random-values';
import { v4 as uuidv4 } from 'uuid';
```

注意：如果您使用 Expo，您至少必須使用 `react-native-get-random-values@1.5.0` 和 `expo@39.0.0`。

### <a name="web-workers--service-workers-edge--18"></a>背景工作角色/服務程式 (Edge <= 18)

[在 Edge <= 18 中，背景工作角色或服務程式不支援 Web 密碼編譯](https://caniuse.com/#feat=cryptography)，而且我們沒有發現 polyfill (如果您有發現，請告知我們)。

## <a name="upgrading-from-uuid7x"></a>升級來源 `uuid@7.x`

### <a name="only-named-exports-supported-when-using-with-nodejs-esm"></a>只有在搭配 Node.js ESM 使用時，才支援具名匯出

`uuid@7.x` 未隨附支援 Node.js 的原生 ECMAScript 模組 (ESM)。 在 Node.js ESM 中匯入它，會因此匯入 CommonJS 來源並具有預設匯出。 此程式庫現在隨附 true Node.js ESM 支援，且僅提供具名匯出。

不要執行：

```javascript
import uuid from 'uuid';
uuid.v4();
```

您現在必須使用具名匯出：

```javascript
import { v4 as uuidv4 } from 'uuid';
uuidv4();
```

### <a name="deep-requires-no-longer-supported"></a>已不再支援深層要求

已不再支援如 `require('uuid/v4')` [的深層要求 (其在 `uuid@7.x`](#deep-requires-now-deprecated) 已被取代)。

## <a name="upgrading-from-uuid3x"></a>升級來源 `uuid@3.x`

「_等等...`uuid@4.x` - `uuid@6.x`發生什麼事了？！？_ 」

為了避免與 RFC [版本 4](#uuidv4options-buffer-offset) 和 [版本 5](#uuidv5name-namespace-buffer-offset) 以及可能的 [版本 6](http://gh.peabody.io/uuidv6/) UUID 混淆，已跳過本課程模組的版本 4 到 6。

### <a name="deep-requires-now-deprecated"></a>深層需求現已被取代

`uuid@3.x` 鼓勵使用深層需求，以將瀏覽器組建的套件組合大小最小化：

```javascript
const uuidv4 = require('uuid/v4'); // <== NOW DEPRECATED!
uuidv4();
```

從此 `uuid@7.x` 程式庫開始，提供 ECMAScript 模組組建，可讓 Webpack 和 Rollup 等封裝工具執行「樹狀結構震動」來移除無作用程式碼。 改為使用 `import` 語法：

```javascript
import { v4 as uuidv4 } from 'uuid';
uuidv4();
```

...或針對 CommonJS：

```javascript
const { v4: uuidv4 } = require('uuid');
uuidv4();
```

### <a name="default-export-removed"></a>預設匯出已移除

`uuid@3.x` 已將版本 4 的 UUID 方法匯出作為預設匯出：

```javascript
const uuid = require('uuid'); // <== REMOVED!
```

此使用模式在 `uuid@3.x` 中已不建議使用，且已從 `uuid@7.x` 中移除。

----
由 [![RunMD 標誌](http://i.imgur.com/h0FVyzU.png)](https://github.com/broofa/runmd)從 [README_js.md](README_js.md) 產生的 Markdown