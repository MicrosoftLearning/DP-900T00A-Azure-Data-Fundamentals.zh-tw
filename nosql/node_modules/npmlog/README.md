---
ms.openlocfilehash: f445a828ea5ae5cba850b910d938f10a783a7ed8
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050444"
---
# <a name="npmlog"></a>npmlog

npm 使用的記錄器使用率。

此記錄器非常基本。  能執行 npm 的記錄。  能支援自訂等級和彩色輸出。

根據預設，記錄會寫入 stderr。  如果您想要將記錄訊息傳送至資料流以外的輸出，您可以變更 `log.stream` 成員，或只接聽其發出的事件，並使用這些事件執行任何動作。

# <a name="installation"></a>安裝

```console
npm install npmlog --save
```

# <a name="basic-usage"></a>基本使用方式

```javascript
var log = require('npmlog')

// additional stuff ---------------------------+
// message ----------+                         |
// prefix ----+      |                         |
// level -+   |      |                         |
//        v   v      v                         v
    log.info('fyi', 'I have a kitty cat: %j', myKittyCat)
```

## <a name="loglevel"></a>log.level

* {字串}

要顯示記錄的等級。  此等級以上的任何記錄都會顯示。  特殊等級 `silent` 將禁止顯示任何項目。

## <a name="logrecord"></a>log.record

* {陣列}

已輸入的所有記錄訊息的陣列。

## <a name="logmaxrecordsize"></a>log.maxRecordSize

* {數字}

要保留的記錄數目上限。  如果 log.record 超過此值的 10%，則會將其切割為此值的 90%。

10% 視窗的原因是為了不需在每個記錄項目上調整大型陣列的大小。

## <a name="logprefixstyle"></a>log.prefixStyle

* {物件}

指定前置詞樣式的樣式物件。  (查看下方內容)

## <a name="logheadingstyle"></a>log.headingStyle

* {物件}

指定標題樣式的樣式物件。  (查看下方內容)

## <a name="logheading"></a>log.heading

* {字串} 預設：""

如果有設定，則會在每一行開頭列印標題。

## <a name="logstream"></a>log.stream

* {字串} 預設：`process.stderr`

寫入輸出的資料流。

## <a name="logenablecolor"></a>log.enableColor()

不論輸出資料流為何，強制在所有訊息上使用色彩。

## <a name="logdisablecolor"></a>log.disableColor()

停用所有訊息上的色彩。

## <a name="logenableprogress"></a>log.enableProgress()

啟用顯示記錄活動微調按鈕和進度列

## <a name="logdisableprogress"></a>log.disableProgress()

停用顯示進度列

## <a name="logenableunicode"></a>log.enableUnicode()

強制進度列使用 Unicode 主題。

## <a name="logdisableunicode"></a>log.disableUnicode()

停用進度列中的 Unicode。

## <a name="logsetgaugetemplatetemplate"></a>log.setGaugeTemplate(template)

設定用於輸出進度列的範本。 如需詳細資訊，請參閱[量測計文件]。

[量測計文件]: https://npmjs.com/package/gauge

## <a name="logsetgaugethemesetthemes"></a>log.setGaugeThemeset(themes)

選取要從進度列挑選主題的主題集。 如需詳細資訊，請參閱[量測計文件]。

## <a name="logpause"></a>log.pause()

停止對資料流發出訊息，但不要卸除訊息。

## <a name="logresume"></a>log.resume()

發出暫停時寫入的所有緩衝訊息。

## <a name="logloglevel-prefix-message-"></a>log.log(level, prefix, message, ...)

* `level` {字串} 要發出訊息的等級
* `prefix` {字串} 字串前置詞。  設定為 "" 以跳過。
* `util.format` 的 `message...` 引數

在指定等級發出記錄訊息。

## <a name="loglevel"></a>記錄\[等級](prefix, message, ...)

例如，

* log.silly(prefix, message, ...)
* log.verbose(prefix, message, ...)
* log.info(prefix, message, ...)
* log.http(prefix, message, ...)
* log.warn(prefix, message, ...)
* log.error(prefix, message, ...)

例如 `log.log(level, prefix, message, ...)`。  如此一來，每個等級都會獲得速記，因此您可以執行 `log.info(prefix, message)`。

## <a name="logaddlevellevel-n-style-disp"></a>log.addLevel(level, n, style, disp)

* `level` {字串} 等級指標
* `n` {數字} 數值等級
* `style` {物件} 具有 fg、bg、反向等的物件。
* `disp` {字串} 在輸出中選擇性的 `level` 取代項目。

設定具有速記函式的新等級等等。

請注意，如果數字為 `Infinity`，則將等級設定為此會導致隱藏所有記錄訊息。  如果數字為 `-Infinity`，則唯一的顯示方式是啟用所有記錄訊息。

## <a name="lognewitemname-todo-weight"></a>log.newItem(name, todo, weight)

* `name` {字串} 選擇性；進度項目名稱。
* `todo` {數字} 選擇性；要完成的總工作量。 預設 0。
* `weight` {數字} 選擇性；此項目相對於其他項目的權數。 預設 1。

這會將新的 `are-we-there-yet` 項目追蹤器新增至進度追蹤器。 傳回的物件具有 `log[level]` 方法，但不是 `are-we-there-yet` `Tracker` 物件。

## <a name="lognewstreamname-todo-weight"></a>log.newStream(name, todo, weight)

這會將新的 `are-we-there-yet` 資料流追蹤器新增至進度追蹤器。 傳回的物件具有 `log[level]` 方法，但不是 `are-we-there-yet` `TrackerStream` 物件。

## <a name="lognewgroupname-weight"></a>log.newGroup(name, weight)

這會將新的 `are-we-there-yet` 追蹤器群組新增至進度追蹤器。 傳回的物件具有 `log[level]` 方法，但不是 `are-we-there-yet` `TrackerGroup` 物件。

# <a name="events"></a>事件

事件全都會與訊息物件一併發出。

* `log` 針對所有訊息發出
* `log.<level>` 針對 `<level>` 等級的所有訊息發出。
* `<prefix>` 具有前置詞的訊息也會作為事件發出其前置詞。

# <a name="style-objects"></a>樣式物件

樣式物件可具有下列欄位：

* `fg` {字串} 前景文字的色彩
* `bg` {字串} 背景的色彩
* `bold`、`inverse`、`underline` {布林值} 設定相關聯的屬性
* `bell` {布林值} 產生雜訊 (這可能會令人感到厭煩)

# <a name="message-objects"></a>訊息物件

每個記錄事件都會和訊息物件一併發出，且 `log.record` 清單包含所有已建立的記錄事件。  具有下列欄位：

* `id` {數字}
* `level` {字串}
* `prefix` {字串}
* `message` {字串} `util.format()` 的結果
* `messageRaw` {陣列} 引數至 `util.format()`

# <a name="blocking-ttys"></a>封鎖 TTY

如果 stderr 和 stdout 為 tty，並具有 setBlocking 呼叫，我們會使用 [`set-blocking`](https://npmjs.com/package/set-blocking) 來設定 stderr 和 stdout 封鎖。
這是在舊版 Node.js 6.x 中解決問題的因應措施，使得 stderr 和 stdout 在 OSX 上無法封鎖。 (它們一律會封鎖 Windows，而且永遠不會封鎖 Linux。) `npmlog` 需要封鎖它們，以便允許輸出至 stdout 和 stderr 可以交錯。
