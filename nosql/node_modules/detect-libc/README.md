---
ms.openlocfilehash: 62ec6880a3e3b2a52d60ca46578b47a88379c266
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050599"
---
# <a name="detect-libc"></a>detect-libc

Node.js 模組，用於偵測指定 Linux 系統上使用的 C 標準程式庫 (libc) 實作系列和版本。

提供適合用於 [prebuild](https://www.npmjs.com/package/prebuild)、[prebuild-ci](https://www.npmjs.com/package/prebuild-ci) 和 [prebuild-install](https://www.npmjs.com/package/prebuild-install) 等 `LIBC` 選項的值，因此讓您能針對採用 musl 程式庫的 Linux，例如採用 Alpine 和 glibc，建置和佈建其預先編譯的二進位檔。

目前支援 `glibc` 和 `musl` 的 libc 偵測。

## <a name="install"></a>安裝

```sh
npm install detect-libc
```

## <a name="usage"></a>使用方式

### <a name="api"></a>API

```js
const { GLIBC, MUSL, family, version, isNonGlibcLinux } = require('detect-libc');
```

* `GLIBC` 是字串，其中包含與 `family` 比較的值「glibc」。
* `MUSL` 是字串，其中包含與 `family` 比較的值「musl」。
* `family` 是代表系統 libc 系列的字串。
* `version` 是代表系統 libc 版本號碼的字串。
* `isNonGlibcLinux` 是布林值，表示系統是否為非 glibc 的 Linux，例如 Alpine。

### <a name="detect-libc-command-line-tool"></a>detect-libc 命令列工具

若在 Linux 系統上執行，而該系統具有非 glibc 的 libc 時，子命令將使用已設定為相關值的 `LIBC` 環境變數來執行。

在所有其他平台上都會依原樣執行子命令。

命令列功能需要 Node v0.12+ 提供的 `spawnSync`。

```sh
detect-libc child-command
```

## <a name="integrating-with-prebuild"></a>與預建整合

```json
  "scripts": {
    "install": "detect-libc prebuild-install || node-gyp rebuild",
    "test": "mocha && detect-libc prebuild-ci"
  },
  "dependencies": {
    "detect-libc": "^1.0.2",
    "prebuild-install": "^2.2.0"
  },
  "devDependencies": {
    "prebuild": "^6.2.1",
    "prebuild-ci": "^2.2.3"
  }
```

## <a name="licence"></a>授權

2017 Lovell Fuller 著作權所有

依 Apache 授權 2.0 版 (「授權」) 來提供授權；您必須依據「授權」規定使用這個檔案。
您可以在 [http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0.html) 取得授權複本

除非適用的法律要求，或經書面同意，否則依「授權」散發的軟體會「依原狀」散發，不包含任何明示或暗示的保證或條件。
如需依「授權」管理權限和限制的特定語言，請參閱「授權」。
