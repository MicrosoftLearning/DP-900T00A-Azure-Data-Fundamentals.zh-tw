---
ms.openlocfilehash: faba66fd211251cabf9efd984bb907f35d419ce4
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050636"
---
# <a name="open"></a>開啟

> 開啟如 URL、檔案、可執行檔等內容。 跨平台。

此主要適用於命令列工具和指令碼，而不是在瀏覽器中使用。

如果您需要的是適用於 Electron 的工具，請使用 [`shell.openPath()`](https://www.electronjs.org/docs/api/shell#shellopenpathpath)。

注意：此套件已取代原本的 [`open` 套件](https://github.com/pwnall/node-open)，並沿用其名稱，因此這個套件的名稱已從 `opn` 改為 `open`。 如果您要升級原本的 `open` 套件 (`open@0.0.5` 或更低版本)，請留意兩者的 API 並不相同。

#### <a name="why"></a>為什麼？

- 主動維護。
- 支援應用程式引數。
- 更安全，因為它使用 `spawn` 而不是 `exec`。
- 修正大部分先前已開放 `node-open` 的問題。
- 包含適用於 Linux 最新的 [`xdg-open` 指令碼](https://cgit.freedesktop.org/xdg/xdg-utils/commit/?id=c55122295c2a480fa721a9614f0e2d42b2949c18)。
- 支援 Windows 應用程式的 WSL 路徑。

## <a name="install"></a>安裝

```
$ npm install open
```

## <a name="usage"></a>使用方式

```js
const open = require('open');

(async () => {
    // Opens the image in the default image viewer and waits for the opened app to quit.
    await open('unicorn.png', {wait: true});
    console.log('The image viewer app quit');

    // Opens the URL in the default browser.
    await open('https://sindresorhus.com');

    // Opens the URL in a specified browser.
    await open('https://sindresorhus.com', {app: 'firefox'});

    // Specify app arguments.
    await open('https://sindresorhus.com', {app: ['google chrome', '--incognito']});
})();
```

## <a name="api"></a>API

在 macOS 平台上，請使用 `open` 命令；在 Windows 平台上，請使用 `start` 命令；在其他平台上，請使用 `xdg-open` 命令。

### <a name="opentarget-options"></a>open(目標, 自訂選項)

將傳回[繁衍子處理序](https://nodejs.org/api/child_process.html#child_process_class_childprocess)的承諾 (promise)。 一般來說，您不會需要使用到進階功能，但如果您想要新增自訂的事件接聽程式，或直接透過繁衍的處理序執行其他操作，這會很有用。

#### <a name="target"></a>目標

輸入： `string`

您想要開啟的內容。 可以是 URL、檔案或可執行檔。

將會根據檔案類型以預設應用程式開啟。 例如，URL 會在您的預設瀏覽器中開啟。

#### <a name="options"></a>選項

輸入： `object`

##### <a name="wait"></a>wait

類型：`boolean`\
預設： `false`

等候開啟的應用程式結束，再完成承諾。 如果設定為 `false`，則在應用程式開啟時立即完成。

請注意，它會等候直到應用程式完全結束，而非其視窗關閉。

在 Windows 平台上，您必須明確指定，應用程式才會等候。

##### <a name="background-supmacos-onlysup"></a>background <sup>(僅限 macOS 平台)</sup>

類型：`boolean`\
預設： `false`

使應用程式在背景中運行。

##### <a name="app"></a>app

輸入： `string | string[]`

指定以哪個應用程式開啟 `target`，也可使用應用程式和應用程式引數的陣列指定。

根據平台不同，應用程式有不同的名稱。 請勿在可重複使用的模組中，以硬式編碼的方式固定參數。 例如，Chrome 在 macOS 平台上為 `google chrome`；在 Linux 平台上為 `google-chrome`；在 Windows 平台上為 `chrome`。

您也可以傳入應用程式的完整路徑。 例如，使用 WSL 路徑 `/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe` 來表示 Chrome 在 Windows 平台中的安裝位置。

##### <a name="url"></a>url

類型：`boolean`\
預設： `false`

在執行目標之前，會使用 `URL` 來編碼目標。<br>
建議不要使用於 URL 以外的目標上。

在處理 [Windows 注意事項上的雙引號](#double-quotes-on-windows)時特別有用。

##### <a name="allownonzeroexitcode"></a>allowNonzeroExitCode

類型：`boolean`\
預設： `false`

當 `wait` 選項設定為 `true` 時，會允許已開啟的應用程式於傳回非零結束代碼時結束。

建議不要設定此選項。 結束代碼為零通常代表運行成功。

## <a name="caveats"></a>警示

### <a name="double-quotes-on-windows"></a>Windows 平台上的雙引號

總結：所有雙引號都會從 `target` 中移除，讓您無法前往您想要的目的地。(在 Windows 平台上)

由於對命令提示字元視窗 (`cmd.exe`) 而言，連字號 (`&`) 等字元具有特殊語意，當它們出現在命令或 URL 中時會中斷運行，因此雙引號的處理面臨一種特殊情況。

針對此與其他問題的解決方案 ([#146](https://github.com/sindresorhus/open/pull/146))，就是以引號括住字串，使 `cmd.exe` 將雙引號引數解譯為純文字引數 (如同 Node.js 採取的方法)。 可惜的是，`cmd.exe` 只能從兩種方式採取 **其一**：全部都處理 **或** 全部都不處理。 根據其自身的說明文件：

>*如果指定了 /C 或 /K，則切換後的其餘命令列，均會視為命令列來處理，並以下列邏輯處理引號 (") 字元：*
>
>    1.  *如果符合下列所有條件，則會保留命令列上的引號字元：*
>        - *並未指定 /S 切換*
>        - *有成對的引號字元*
>        - *兩個引號字元間沒有特殊字元，例如：&<>()@^|*
>        - *兩個引號字元間有空格*
>        - *兩個引號字元間的字串為可執行檔的名稱。*
>
>    2.  *否則，預設行為是查看第一個字元是否為引號字元。如果是引號字元則移除前置字元，並移除命令列上最後一個引號字元，保留最後一個引號字元後的任何文字。*

第二個選項能解決所有的問題，而為了維持其他行為的一致性，我們現在也會使用 `/S` 切換，因此我們 **一律會** 選擇第二個選項。 注意，內建的雙引號處理方式，就是最終會從命令列移除所有引號，到目前為止，我們尚未找到可行的解決方法 (如果您找到了，歡迎分享！)。

若要減少此注意事項所述的影響 (至少對於 URL 而言)，請參閱 [URL 選項](#url)。 當目標為 URL 且進行此設定時，雙引號會「保留」。

## <a name="related"></a>相關參考

- [open-cli](https://github.com/sindresorhus/open-cli) - 此模組的 CLI
- [open-editor](https://github.com/sindresorhus/open-editor) - 在編輯器中指定開啟檔案的行和資料行

---

<div align="center">
    <b>
        <a href="https://tidelift.com/subscription/pkg/npm-opn?utm_source=npm-opn&utm_medium=referral&utm_campaign=readme">訂閱 Tidelift 來取得此套件的專業支援</a>
    </b>
    <br>
    <sub>Tidelift 協助維護人員持續開發開放原始碼<br>同時也向公司確保其依存性的安全性、維護和授權。
    </sub>
</div>
